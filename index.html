<!DOCTYPE html>
<html>
<head>
	<title>Mesajlasma</title>
	

  <style type="text/css">

*{
  box-sizing: border-box;
}

body{
  font-family: "Helvetica Neue",sans-serif;
}

.mesajlar {
  
  height: 100%;
  margin: 0;
  overflow-y: scroll;
  padding-left: 10px;
}

.mesajlar li {
  padding: 15px 0px;
  background-color: #eee;
  list-style: none;
  display: list-item;
  border-bottom: 1px solid black;
  border-radius: 25px solid white;

}
.mesajlar li:nth-child(odd) {
}

.MesajAlani{
  height: 100%;
  padding-bottom: 60px;
}

.mesajText{ 
  border: 10px solid #000;
  bottom: 0px !important;
  height: 60px;
  left: 0;
  outline: none;
  padding: 10px;
  position: static;
  right: 0;
  width: 100%;

}

.baslik{
  padding: 15px;
  background-color: aliceblue;
}
.baslik h2{
  text-align: center;
}
.content{
}


  </style>


</head>
<body>


<div class="baslik"><h2>Ortak Oda</h2></div>




<div class="content">
 <div class="MesajAlani">
 <ul class="mesajlar"></ul>
 </div>
<input class="mesajText" onkeypress="yazildi()" placeholder="Mesajınızı yazınız." autofocus> 
</div>




    <script src="/socket.io/socket.io.js"></script>

    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>

    <script type="text/javascript">

    var socket = io.connect();
    var isim = prompt("Lütfen isminizi giriniz");
    socket.emit("gonder", isim);
    socket.on("al", function(veri)
    {
      if (veri != isim) {
        alert(veri + "sisteme giriş yaptı.");
      }
    })



  function yazildi(){
    var tus = window.event.keyCode;
    if (tus == 13) {
     // var metin = document.getElementById('mesaj').value;
     var metin =  $(".mesajText").val();
     if( metin ==  '' )
     {
      alert("sa");
      exit;
     }
    socket.emit("mesaj", {"mesaj":metin,"kullanici":isim});

    $(".mesajText").val("");
    // document.getElementById('mesaj').value = "";

  }
  }


  socket.on("mesajAl", function(veri)
  {
        $('.mesajlar').append($('<li>').text(veri.kullanici + ": " + veri.mesaj));
  });


    </script>

</body>
</html>
